<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <style>
        section.active {
            animation: sectionAnimation 0.4s ease-in-out;
        }

        #popup {
            position: fixed;
            bottom: 14%;
            right: 2%;
            z-index: 500;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(39, 39, 42, 0.3);
            backdrop-filter: blur(16px);
            border-radius: 0.75rem;
            padding: 1rem 1.25rem;
            opacity: 0;
            transform: translateY(30%);
            transition: all 0.35s ease-in-out;
            pointer-events: none;
        }

        #popup.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
    </style>
</head>
<body class="bg-zinc-950">
    <header class="w-full fixed bottom-0 left-0 bg-zinc-950/80 backdrop-blur-md rounded-t-lg z-150">
        <div class="px-4 py-6">
            <div class="grid grid-cols-4" id="hd-sections"></div>
        </div>
    </header>

    <main class="min-h-screen z-50 p-4 backdrop-blur-3xl">
        <section class="h-full hidden" id="statistic">
            <div class="flex flex-col items-center gap-4 pb-20">
                <h3 class="text-gray-200 text-3xl lg:text-3xl font-semibold tracking-tight">Статистика студии:</h3>
                <div class="grid grid-cols-3 gap-4 items-center p-4 border border-gray-300/10 backdrop-blur-xl rounded-xl">
                    <div class="flex flex-col items-center justify-center gap-2">
                        <i class="fa-solid fa-users text-gray-300 text-xl"></i>
                        <h3 id="usersCount" class="text-white text-md font-semibold tracking-tight"></h3>
                        <p class="text-gray-400 text-xs font-medium tracking-tight">Юзеров в студии</p>
                    </div>
                    <div class="flex flex-col items-center justify-center gap-2">
                        <i class="fa-solid fa-shopping-cart text-gray-300 text-xl"></i>
                        <h3 id="ordersCount" class="text-white text-md font-semibold tracking-tight"></h3>
                        <p class="text-gray-400 text-xs font-medium tracking-tight">Сделано заказов</p>
                    </div>
                    <div class="flex flex-col items-center justify-center gap-2">
                        <i class="fa-solid fa-shopping-cart text-gray-300 text-xl"></i>
                        <h3 id="productsCount" class="text-white text-md font-semibold tracking-tight"></h3>
                        <p class="text-gray-400 text-xs font-medium tracking-tight">Товаров в студии</p>
                    </div>
                </div>
            </div>
        </section>
        <section class="min-h-full hidden" id="users">
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 pb-20" id="userscontainer">
            </div>
        </section>
        <section class="h-full hidden" id="products">
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 pb-20" id="productscont"></div>
        </section>
        <section class="h-full hidden" id="create">
            <div class="flex flex-col items-center justify-center gap-4 pb-20">
                <div class="w-full flex flex-col items-center justify-center gap-2">
                    <h3 class="text-lg text-gray-200 font-semibold tracking-tight">Введите ссылку на иконку:</h3>
                    <input type="text" name="icon" id="icon" class="w-[90%] py-2 border border-gray-400/60 rounded-xl text-base text-gray-300 font-medium text-center backdrop-blur-xl focus:border-blue-400" placeholder="Ссылка на иконку" required>
                </div>
                <div class="w-full flex flex-col items-center justify-center gap-2">
                    <h3 class="text-lg text-gray-200 font-semibold tracking-tight">Введите alt для иконки:</h3>
                    <input type="text" name="alt" id="alt" class="w-[90%] py-2 border border-gray-400/60 rounded-xl text-base text-gray-300 font-medium text-center backdrop-blur-xl" placeholder="Описание картинки" required>
                </div>
                <div class="w-full flex flex-col items-center justify-center gap-2">
                    <h3 class="text-lg text-gray-200 font-semibold tracking-tight">Название товара:</h3>
                    <input type="text" name="name" id="name" class="w-[90%] py-2 border border-gray-400/60 rounded-xl text-base text-gray-300 font-medium text-center backdrop-blur-xl" placeholder="Название товара" required>
                </div>
                <div class="w-full flex flex-col items-center justify-center gap-2">
                    <h3 class="text-lg text-gray-200 font-semibold tracking-tight">Описание товара:</h3>
                    <input type="text" name="description" id="description" class="w-[90%] py-2 border border-gray-400/60 rounded-xl text-base text-gray-300 font-medium text-center backdrop-blur-xl" placeholder="Описание товара" required>
                </div>
                <div class="w-full flex flex-col items-center justify-center gap-2">
                    <h3 class="text-lg text-gray-200 font-semibold tracking-tight">Цена товара:</h3>
                    <input type="number" name="price" id="price" class="w-[90%] py-2 border border-gray-400/60 rounded-xl text-base text-gray-300 font-medium text-center backdrop-blur-xl" placeholder="Цена товара" required>
                </div>
                <button type="submit" id="addProductBtn" class="px-4 py-2 bg-blue-500 text-base text-white font-semibold rounded-xl w-[90%] tracking-tight mt-3 transition">Добавить товар</button>
            </div>
        </section>
    </main>

    <div class="fixed bottom-[14%] right-[2%] z-500 border border-gray-300/10 bg-zinc-700/30 backdrop-blur-xl rounded-xl tracking-tight" id="popup">
        <div class="py-4 px-2">
            <!-- text-gray-100 text-red-300 -->
            <h3 class="text-red-300 text-sm font-semibold"></h3>
        </div>
    </div>

    <div class="fixed top-[50%] left-[50%] -translate-[50%] z-[-50] w-[80%] h-[40%] rounded-full bg-blue-600/70"></div>

    <script src="./js/headerbtns.js"></script>
    <script src="./js/changesection.js"></script>
    <script src="./js/users.js"></script>
    <script src="./js/addrole.js"></script>
    <script src="./js/getstatistic.js"></script>
    <script src="./js/createnewproduct.js"></script>

    <script>
        const user = tg.initDataUnsafe?.user;

        if (user) {
            (async () => {
                try {
                    const res = await fetch('https://holpenstudioback-production.up.railway.app/api/users/create', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(user)
                    });
                    const data = await res.json();
                    console.log("User saved:", data);
                } catch (err) {
                    console.error("Ошибка при сохранении пользователя:", err);
                }
            })();
        }
    </script>
</body>
</html>
